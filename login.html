<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-en="Login / Register" data-lang-ar="تسجيل الدخول / التسجيل"></title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(135deg, #f5f7fa 0%, #e4e8eb 100%);
        direction: ltr;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }
      body.ar {
        font-family: 'Tajawal', sans-serif;
        direction: rtl;
      }
      .login-container {
        background-color: #ffffff;
        padding: 2.5rem;
        border-radius: 0.75rem;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        width: 100%;
        max-width: 400px;
      }
      .input-field {
        width: 100%;
        padding: 0.75rem;
        margin-bottom: 1rem;
        border: 1px solid #e2e8f0;
        border-radius: 0.375rem;
        font-size: 1rem;
      }
      .btn {
        width: 100%;
        padding: 0.75rem;
        border-radius: 0.375rem;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: background-color 0.2s;
        border: none;
      }
      .btn-primary {
        background-color: #1E88E5;
        color: #ffffff;
      }
      .btn-primary:hover {
        background-color: #1565C0;
      }
      .btn-secondary {
        background-color: #E0E0E0;
        color: #424242;
      }
      .btn-secondary:hover {
        background-color: #BDBDBD;
      }
      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }
      .loading {
        display: none;
      }
      .loading.show {
        display: inline-block;
      }
    </style>
  </head>
  <body>
    <div class="login-container">
      <div class="text-center mb-6">
        <h1 class="text-3xl font-bold text-blue-600 mb-2">CORDR</h1>
        <h2 class="text-xl font-semibold text-gray-700" data-lang-en="Interactive Presentation" data-lang-ar="العرض التفاعلي">Interactive Presentation</h2>
      </div>
      
      <form id="authForm">
        <input type="email" id="email" class="input-field" placeholder="Email" required data-lang-en-placeholder="Email" data-lang-ar-placeholder="البريد الإلكتروني">
        <input type="password" id="password" class="input-field" placeholder="Password" required data-lang-en-placeholder="Password" data-lang-ar-placeholder="كلمة المرور">
        
        <button type="submit" id="loginBtn" class="btn btn-primary mb-3">
          <span class="loading" id="loginLoading">⏳</span>
          <span data-lang-en="Login" data-lang-ar="تسجيل الدخول">Login</span>
        </button>
        
        <button type="button" id="registerBtn" class="btn btn-secondary">
          <span class="loading" id="registerLoading">⏳</span>
          <span data-lang-en="Register" data-lang-ar="التسجيل">Register</span>
        </button>
      </form>
      
      <div class="mt-4 text-center">
        <button id="languageToggle" class="text-blue-600 underline" data-lang-en="العربية" data-lang-ar="English">العربية</button>
      </div>
      
      <p id="message" class="text-center mt-4"></p>
      
      <!-- Firebase Configuration Notice -->
      <div class="mt-6 p-3 bg-yellow-50 border border-yellow-200 rounded">
        <p class="text-sm text-yellow-800" data-lang-en="Note: Firebase configuration required for full functionality" data-lang-ar="ملاحظة: مطلوب تكوين Firebase للوظائف الكاملة">Note: Firebase configuration required for full functionality</p>
      </div>
    </div>

    <script src="js/language.js"></script>
    <script type="module">
      // For now, using simple authentication until Firebase is configured
      document.addEventListener('DOMContentLoaded', () => {
        const authForm = document.getElementById('authForm');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const loginBtn = document.getElementById('loginBtn');
        const registerBtn = document.getElementById('registerBtn');
        const messageDisplay = document.getElementById('message');
        const loginLoading = document.getElementById('loginLoading');
        const registerLoading = document.getElementById('registerLoading');

        function showMessage(text, isError = false) {
          messageDisplay.textContent = text;
          messageDisplay.className = `text-center mt-4 ${isError ? 'text-red-500' : 'text-green-500'}`;
        }

        function setLoading(button, loading, isLoading) {
          button.disabled = isLoading;
          loading.classList.toggle('show', isLoading);
        }

        authForm.addEventListener('submit', async (e) => {
          e.preventDefault();
          const email = emailInput.value;
          const password = passwordInput.value;

          if (!email || !password) {
            showMessage(currentLang === 'ar' ? 'يرجى ملء جميع الحقول' : 'Please fill in all fields', true);
            return;
          }

          setLoading(loginBtn, loginLoading, true);
          showMessage('');

          try {
            // Simulate authentication (replace with Firebase auth)
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // Store authentication state
            localStorage.setItem('isAuthenticated', 'true');
            localStorage.setItem('userEmail', email);
            localStorage.setItem('userId', 'user_' + Date.now());
            
            showMessage(currentLang === 'ar' ? 'تم تسجيل الدخول بنجاح' : 'Login successful');
            
            setTimeout(() => {
              window.location.href = 'index.html';
            }, 1000);
          } catch (error) {
            showMessage(currentLang === 'ar' ? 'خطأ في تسجيل الدخول' : 'Login error', true);
          } finally {
            setLoading(loginBtn, loginLoading, false);
          }
        });

        registerBtn.addEventListener('click', async () => {
          const email = emailInput.value;
          const password = passwordInput.value;

          if (!email || !password) {
            showMessage(currentLang === 'ar' ? 'يرجى ملء جميع الحقول' : 'Please fill in all fields', true);
            return;
          }

          setLoading(registerBtn, registerLoading, true);
          showMessage('');

          try {
            // Simulate registration (replace with Firebase auth)
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // Store authentication state
            localStorage.setItem('isAuthenticated', 'true');
            localStorage.setItem('userEmail', email);
            localStorage.setItem('userId', 'user_' + Date.now());
            
            showMessage(currentLang === 'ar' ? 'تم التسجيل بنجاح' : 'Registration successful');
            
            setTimeout(() => {
              window.location.href = 'index.html';
            }, 1000);
          } catch (error) {
            showMessage(currentLang === 'ar' ? 'خطأ في التسجيل' : 'Registration error', true);
          } finally {
            setLoading(registerBtn, registerLoading, false);
          }
        });

        // Language toggle
        document.getElementById('languageToggle').addEventListener('click', () => {
          toggleLanguage();
        });
      });
    </script>
  </body>
</html>

